<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
		<script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
		<script src="pure.js"></script>
		<script src="resigtmpl.js"></script>
		<script id="jqt_tmpl" type="text/x-jquery-tmpl">
			<div id="${id}">${text}</div>
		</script>
		<script type="text/html" id="resig_tmpl">
			<div id="<%=id%>"><%=text%></div>
		</script>
		<script>
			$(function () {
				var data = {}; data.text = 'hello world'; data.id = 1;
				var nreps = 1000;

				function jqt_test() {
					var t1 = new Date();
					var doc;
					var t = $('#jqt_tmpl');
					for (var i = 0; i < nreps; i++) {
						doc = t.tmpl(data);
					}
					doc.appendTo('#jqt .result');
					var t2 = new Date();
					$('#jqt .time').html(t2-t1);
				}

				function pure_test() {
					var t1 = new Date();
					var t = $('#pure .result');
					for (var i = 0; i < nreps; i++) {
						t.pureJSTemplate({
							id: 'pure_tmpl',
							data: data
						});
					}
					var t2 = new Date();
					$('#pure .time').html(t2-t1);
				}

				function resig_test() {
					var output = "";
					var t1 = new Date();
					var t = tmpl('resig_tmpl');
					var res = $('#resig .result');
					for (var i = 0; i < nreps; i++) {
						output = t(data);
						res.html(output);
					}
					var t2 = new Date();
					$('#resig .time').html(t2-t1);
				}

				jqt_test();
				pure_test();
				resig_test();
			});
		</script>
	</head>
	<body>
		<h1>JS Template Benchmark</h1>
		<div id="jqt">
			<h3><a href="http://api.jquery.com/jQuery.template/">JQuery Tmpl</a></h3>
			<div class="result"></div>
			<div><span class="time"></span> ms</div>
		</div>
		<div id="pure">
			<h3><a href="http://www.javascriptr.com/2008/06/05/purejstemplate-a-pure-javascript-templating-engine-for-jquery/">Pure Tmpl</a></h3>
			<textarea id="pure_tmpl" style="display:none">
				<div id="<#=data.i#>"><#=data.text#></div>
			</textarea>
			<div class="result"></div>
			<div><span class="time"></span> ms</div>
		</div>
		<div id="resig">
			<h3><a href="http://ejohn.org/blog/javascript-micro-templating/">Resig Tmpl</a></h3>
			<div class="result"></div>
			<div><span class="time"></span> ms</div>
		</div>
	</body>
</html>
