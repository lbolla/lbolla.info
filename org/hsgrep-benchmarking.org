#+TITLE: HSGrep benchmarking

#+DATE: <2011-11-30>

Few days ago, [[./hsgrep-sorted-grep-in-haskell][I rewrote =sgrep= in Haskell]]. I was curious to know how it compares to [[http://en.wikipedia.org/wiki/Grep.org][=grep=]] in term of execution speed. In particular, I was interested to verify that =hsgrep= scales as =O(log n)=, instead of =O(n)=, with =n= being the size of the file analyzed.

First of all, in order to have similar performance to =grep=, I had to convert my original program to use [[http://hackage.haskell.org/packages/archive/bytestring/latest/doc/html/Data-ByteString.html][Haskell's bytestrings]]. [[https://github.com/lbolla/HSGrep/tree/bytestring][You can find the code here]]. Testing files are generated with [[https://github.com/lbolla/HSGrep/blob/bytestring/data/gendata.hs][this script]].

Here are the results obtained. =grep= is still faster for smallish files (I haven't spent too much time tweaking =hsgrep=), but =hsgrep= scales much better and it wins for files larger than few megabytes!

#+CAPTION: HSGrep benchmark
[[./img/bench1.png]]
